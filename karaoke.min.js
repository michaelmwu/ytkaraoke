var tag=document.createElement("script");tag.src="http://www.youtube.com/player_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);INITIAL_VIDEO="oxbB3NGJO6g";BACKSPACE=8;ENTER=13;PAUSE_BREAK=19;SPACEBAR=32;LEFT_ARROW=37;UP_ARROW=38;RIGHT_ARROW=39;DOWN_ARROW=40;PGUP=33;PGDN=34;Q_KEY=81;S_KEY=83;Z_KEY=90;C_KEY=67;B_KEY=66;X_KEY=88;V_KEY=86;F1_KEY=112;H_KEY=72;QUEUE_SHOW_TIME="fast";QUEUE_HIDE_TIME="slow";SEARCH_SHOW_TIME="fast";
SEARCH_HIDE_TIME="slow";SEARCH_THROTTLE_TIME=200;HELP_SHOW_TIME=3E4;DIALOG_HIDE_TIME=DIALOG_SHOW_TIME=HELP_HIDE_TIME="fast";QUEUE_MSG_SHOW_TIME=3E3;NEXT_SHOW_TIME=5E3;BAR_SHOW_TIME=6E3;var current=null,queue=[],previous=[],videos=[];PERPAGE_MIN=3;PERPAGE_MAX=10;SEARCH_MAX=1E3;
var perPage=PERPAGE_MIN,perDisplayed=0,searchTotal=SEARCH_MAX,startIndex=1,playerState=0,searchBarState=1,oldSearch="",oldFilter="",aboutOpen=false,managerOpen=false,filterThrottle=false,throttle=false,suggested="",curRequest=null,queueItemWidth,searchItemHeight=113,searchWidth,popular=[],pi=0,barMsgTimeout,barHovered=false,dragging=false,msgQueue=[],lastFocused,windowFocused=true,itemFocused=false,popupWin=null;
function calculateDims(){searchItemHeight=$("#results .searchItem:first").outerHeight(true);calculatePerPage()}function openPopup(){hideSearch();var a="karaoke-pop.html#tab=0",b=$("#searchBox").val();if(b!="")a+="&q="+encodeURIComponent(b);if(!popupWin||popupWin.closed)popupWin=window.open(a,"popupWin","location=0,height=590,width=560");else{popupWin.focus();sendQueue()}}function setHash(a){a=$.trim(a);window.location.replace("#"+encodeURI(a))}
function getHash(){return decodeURIComponent(window.location.hash.substring(1))}function sendQueue(){popupWin&&!popupWin.closed&&popupWin.recvQueue(queue)}function recvQueue(a){queue=a;updateQueueDisplay()}var dialogs=[];function removeDialog(a){for(var b=0;b<dialogs.length;b++)if(dialogs[b].attr("id")==a.attr("id")){dialogs.remove(b);break}}Z_BASE=3;function addDialog(a){removeDialog(a);dialogs.push(a);for(a=0;a<dialogs.length;a++)dialogs[a].css("z-index",Z_BASE+a)}
function onDialogFocus(){addDialog($(this))}function onDialogClose(){removeDialog($(this))}function getCurrentTitle(){return current?current.title:false}function getNextTitle(){return queue.length>1?"Next: "+queue[1].title:false}function barMsg(a,b){if(typeof b=="undefined")b=QUEUE_MSG_SHOW_TIME;msgQueue.length=0;if(!dragging){msgQueue.push({msg:a,time:b});processMessages()}}
function barMsgReset(){$("#queueCell").fadeIn();$("#barMsg").fadeOut();msgQueue.length=0;if(barMsgTimeout){clearTimeout(barMsgTimeout);barMsgTimeout=null}barHovered||dragging||processMessages()}function addNext(){queue.length>1&&msgQueue.push({msg:"Next: "+queue[1].title,time:NEXT_SHOW_TIME})}function addCurrent(){current&&msgQueue.push({msg:current.title,time:NEXT_SHOW_TIME,stop:addNext})}
function processMessages(){if(msgQueue.length==0)current&&queue.length==0?msgQueue.push({msg:current.title,time:-1}):msgQueue.push({msg:false,time:BAR_SHOW_TIME,stop:addCurrent});var a=msgQueue.shift(),b=typeof a.msg=="function"?a.msg():a.msg;if(b){$("#queueCell").fadeOut();$("#barMsg").html(b);$("#barMsg").fadeIn()}else{$("#queueCell").fadeIn();$("#barMsg").fadeOut()}if(barMsgTimeout){clearTimeout(barMsgTimeout);barMsgTimeout=null}if(a.time&&a.time>0)barMsgTimeout=setTimeout(function(){typeof a.stop==
"function"&&a.stop();processMessages()},a.time)}function onBarMouseEnter(){barHovered=true;queue.length>0&&barMsgReset()}function onBarMouseLeave(){barHovered=false;queue.length>0&&barMsgReset()}function msgNext(){queue.length>1&&barMsg("Next: "+queue[1].title,NEXT_SHOW_TIME)}
function run(){Array.prototype.remove=function(a,b){if(typeof b=="undefined")b=a+1;var c=this.slice(b||a+1||this.length),d=this.slice(a,b||a+1);this.length=a<0?this.length+a:a;this.push.apply(this,c);return d};String.prototype.ltrim=function(){return this.replace(/^\s+/,"")};$("#container").notify();searchWidth=$("#videoCell").css("right");queueItemWidth=$("#queue > div:first").outerWidth(true);$("#shinedays").load(calculateDims);$("#shinedays").attr("src","shinedays.jpg");$("#barCell,#queueDrop").click(onBarClick);
if($.client.os=="Mac"){$("#winhelp").hide();$("#machelp").show()}else if(isMobile()){$("#winhelp").hide();$("#mobilehelp").show();showAbout()}$("#managerFilter").val("");$("#managerFilter").keyup(onFilterKeyUp);$("#managerFilter").focus(onFilterFocus);$("#managerFilter").blur(onFilterBlur);$("#managerFilter").keydown(onFilterKeyDown);$("#manager").draggable({scroll:false,cancel:"#managerQueue ul, #managerForm",containment:"window"});$("#manager").mousedown(onDialogFocus);$("#manager").click(clickManager);
hash=getHash();$("#searchBox").val(hash);hash.length>0&&setHash("");$("#searchBox").focus(onSearchFocus);$("#searchBox").blur(onSearchBlur);$("#searchBox").focus();setAutoFocus($("#searchBox"));$("#suggestBox").focus(onSuggestFocus);$("#suggestBox").val("");$("#searchText").css("font-family",$("#searchBox").css("font-family"));$("#searchText").css("font-size",$("#searchBox").css("font-size"));$("#suggestText").css("font-family",$("#searchBox").css("font-family"));$("#suggestText").css("font-size",
$("#searchBox").css("font-size"));$("#about").draggable({scroll:false,containment:"window"});$("#about").mousedown(onDialogFocus);$("#about").click(toggleAbout);$("#aboutLink").click(toggleAbout);$("#searchForm").submit(searchSubmit);$("#barCell").mousedown(onDialogFocus);$("#barCell").hover(onBarMouseEnter,onBarMouseLeave);$("#queue").sortable({update:queueSort,floats:true,tolerance:"pointer"});addDialog($("#barCell"));$(window).blur(onWindowBlur);$(window).focus(onWindowFocus);$(window).resize(onWindowResize);
$(document).mousewheel(onMouseWheel);$("#popupLink").click(openPopup);setInterval(lastFocus,300)}function onMouseWheel(a,b){if(b>0)searchControl(PGUP);else b<0&&searchControl(PGDN)}function setAutoFocus(a){lastFocused=a;itemFocused=false}function lastFocus(){if(windowFocused&&lastFocused&&!itemFocused){lastFocused.focus();itemFocused=true}}
function nextPopular(){if(popular.length>0){if(pi>=popular.length){pi=0;popular.sort(function(){return 0.5-Math.random()})}var a=popular[pi++];barMsg(a.title,-1);loadNotifyVideo(a)}}
function getPopular(){var a=0;$.ajax({type:"GET",url:"http://gdata.youtube.com/feeds/api/standardfeeds/most_popular_Music?alt=jsonc&v=2&format=5&max-results=50",dataType:"jsonp",success:function(b){b.data.items&&popular.push.apply(popular,b.data.items);if(++a==2){pi=popular.length;current||setCurrentVideo(0)}}});$.ajax({type:"GET",url:"http://gdata.youtube.com/feeds/api/videos?q=karaoke+lyrics&format=5&v=2&alt=jsonc&max-results=50",dataType:"jsonp",success:function(b){b.data.items&&popular.push.apply(popular,
b.data.items);if(++a==2){pi=popular.length;current||setCurrentVideo(0)}}})}function keepInWindow(a){var b=$(window).height(),c=a.offset().top+a.outerHeight(),d=$(window).width(),e=a.offset().left+a.outerWidth(),f=a.offset();if(c>b||e>d){if(c>b)f.top=Math.max(0,b-a.outerHeight());if(e>d)f.left=Math.max(0,d-a.outerWidth());a.offset(f)}}function centerH(a,b){if(typeof b=="undefined")b=$(window);a.css("left",(b.width()-a.width())/2+"px")}
function centerV(a,b){if(typeof b=="undefined")b=$(window);a.css("top",(b.height()-a.height())/2+"px")}function center(a,b){if(typeof b=="undefined")b=$(window);centerH(a,b);centerV(a,b)}function showAbout(){aboutOpen=true;center($("#about"),$("#videoCell"));addDialog($("#about"));$("#about").fadeIn(DIALOG_SHOW_TIME)}function toggleAbout(){if(aboutOpen){aboutOpen=false;$("#about").fadeOut(DIALOG_HIDE_TIME);removeDialog($("#about"))}else showAbout();return false}count=0;
function clickManager(a){if($(a.target).parents("#managerQueue, #managerForm").length>0)return true;else{toggleManager();return false}}function onBarClick(a){$(a.target).parents("#queueCell, #controlCell").length>0||toggleManager()}
function toggleManager(){if(managerOpen){managerOpen=false;$("#manager").fadeOut(DIALOG_HIDE_TIME);removeDialog($("#manager"));setAutoFocus($("#searchBox"))}else{managerOpen=true;center($("#manager"),$("#videoCell"));addDialog($("#manager"));$("#manager").fadeIn(DIALOG_SHOW_TIME);queue.length>0&&setAutoFocus($("#managerFilter"))}}function onFilterKeyUp(a){filterThrottle||throttledFilter();filterTrapKey(a.keyCode)&&a.stopPropagation()}
function onFilterFocus(){lastFocused=$("#managerFilter");itemFocused=true}function onFilterBlur(){itemFocused=false}function onFilterKeyDown(a){filterTrapKey(a.keyCode)&&a.stopPropagation()}function filterTrapKey(a){return $("#managerFilter").val()!=""&&a==BACKSPACE}
function throttledFilter(){filterThrottle=false;var a=$("#managerFilter").val().toLowerCase();if(oldFilter!=a){filterThrottle=true;oldFilter=a;updateManagerDisplay();setTimeout(function(){throttledFilter(false)},SEARCH_THROTTLE_TIME)}}
function onYoutubePlayerReady(){getPopular();$("#searchBox").keyup(onSearchKeyUp);$("#searchBox").input(onSearchInput);$("#searchBox").keydown(onSearchKeyDown);throttledSearch();$(document.documentElement).keydown(onKeyDown);$(document.documentElement).keyup(onKeyUp);if(!$.cookie("first-ytkaraoke")){showAbout();var a=setTimeout(function(){toggleAbout();$("#about").unbind("click.first")},HELP_SHOW_TIME);$("#about").bind("click.first",function(){window.clearTimeout(a);$("#about").unbind("click.first");
$("#searchBox").focus()});$.cookie("first-ytkaraoke",true,{expires:365,path:"/"})}}function searchSubmit(){return false}function onPlayerStateChange(a){a=a.data;a==0&&forceNextVideo();if(a==1||a==3)$("#controlPlayPause").attr("src","pause-24.png");else a!=-1&&$("#controlPlayPause").attr("src","play-24.png");popupWin&&!popupWin.closed&&popupWin.onPlayerStateChange(a);playerState=a}function onPlayerError(){forceNextVideo()}
function onKeyDown(a){var b=$.client.os=="Mac"?a.ctrlKey:a.altKey;if(b&&(a.keyCode==V_KEY||a.keyCode==RIGHT_ARROW)){forceNextVideo();return false}else if(b&&(a.keyCode==X_KEY||a.keyCode==LEFT_ARROW)){prevVideo();return false}else if(b&&a.keyCode==C_KEY||($.client.os=="Mac"?a.ctrlKey:a.shiftKey)&&a.keyCode==SPACEBAR||a.keyCode==PAUSE_BREAK){playPauseVideo();return false}else if(b&&a.keyCode==Q_KEY){toggleManager(a);return false}else if(a.keyCode==UP_ARROW){hideQueue();return false}else if(a.keyCode==
DOWN_ARROW){showQueue();return false}else if(a.keyCode==F1_KEY||b&&a.keyCode==H_KEY){toggleAbout();return false}else if(b&&a.keyCode==S_KEY){toggleSearch();return false}else if(!dragging&&(a.keyCode==PGUP||a.keyCode==PGDN)){searchControl(a.keyCode);return false}return a.keyCode!=BACKSPACE}function onKeyUp(a){return a.keyCode!=BACKSPACE}function hideQueue(){$("#barCell").animate({top:-85},QUEUE_HIDE_TIME);removeDialog($("#barCell"))}
function showQueue(){addDialog($("#barCell"));$("#barCell").animate({top:0},QUEUE_SHOW_TIME)}function toggleSearch(){searchBarState==1?hideSearch():showSearch()}function hideSearch(){$("#searchCell").animate({right:"-"+searchWidth},SEARCH_HIDE_TIME).animate({opacity:0},0);$("#funstuff").animate({right:"-"+searchWidth},SEARCH_HIDE_TIME).animate({opacity:0},0);$("#videoCell").animate({right:0},SEARCH_HIDE_TIME);lastFocused==$("#searchBox")&&setAutoFocus(null);searchBarState=0}
function showSearch(){$("#searchCell").animate({opacity:1},0).animate({right:0},SEARCH_HIDE_TIME);$("#funstuff").animate({opacity:1},0).animate({right:0},SEARCH_HIDE_TIME);$("#videoCell").animate({right:searchWidth},SEARCH_HIDE_TIME);lastFocused||setAutoFocus($("#searchBox"));searchBarState=1}function forceNextVideo(){setCurrentVideo(1)}function nextVideo(){if(queue.length>1){previous.unshift(queue[0]);setCurrentVideo(1)}else queue.length==0&&nextPopular()}
function prevVideo(){if(previous.length>0){queue.unshift(previous.shift());setCurrentVideo(0);updateQueueDisplay()}}function onYouTubePlayerAPIReady(){ytplayer=new YT.Player("innerVideoCell",{height:"100%",width:"100%",videoId:INITIAL_VIDEO,playerVars:{enablejsapi:1,origin:window.location.hostname,wmode:"transparent"},events:{onReady:onYoutubePlayerReady,onStateChange:onPlayerStateChange,onError:onPlayerError}})}function searchTrapKey(a){return a==BACKSPACE}var forceSearch=false,suggestEnabled=true;
function throttledSearch(){throttle=false;var a=$("#searchBox").val();if(oldSearch!=a||forceSearch){throttle=true;oldSearch=a;suggestEnabled?suggest(a):search(a,startIndex,perPage);forceSearch=false;setTimeout(function(){throttledSearch(false)},SEARCH_THROTTLE_TIME)}}function onSearchKeyUp(a){searchTrapKey(a.keyCode)&&a.stopPropagation()}
function onSearchInput(){var a=$("#searchBox").val();$("#searchText").html(a);if(suggested.indexOf(a)!=0){setSuggested("");startIndex=1;searchTotal=SEARCH_MAX}dragging||searchControl(0)}
function searchControl(a){var b=$("#searchBox").val().ltrim();if(a==0){forceSearch=false;suggestEnabled=true}else if(b!="")if(a==ENTER){forceSearch=true;suggestEnabled=false}else if(a==PGUP){a=startIndex;if(startIndex>searchTotal)a=Math.floor(searchTotal/perPage)*perPage+1;else{a=startIndex-perPage;a=Math.max(1,a)}if(a!=startIndex){forceSearch=true;startIndex=a}}else if(a==PGDN){a=startIndex;if(startIndex+perPage<=searchTotal)a=startIndex+perPage;else if(startIndex>searchTotal)a=Math.floor(searchTotal/
perPage)*perPage+1;if(a!=startIndex){forceSearch=true;startIndex=a}}throttle||throttledSearch()}
function onSearchKeyDown(a){if(a.keyCode==ENTER&&!dragging){setSuggested("");searchControl(ENTER)}var b=$("#searchBox").getSelection(),c=$("#searchBox").val();if(a.keyCode==RIGHT_ARROW)if(c.length>0&&suggested.length>0)if(b.start>=c.length){$("#searchBox").val(suggested);$("#searchBox").setSelection(suggested.length,suggested.length);$("#searchText").html(suggested)}searchTrapKey(a.keyCode)&&a.stopPropagation()}function onSearchFocus(){lastFocused=$("#searchBox");itemFocused=true}
function onSearchBlur(){itemFocused=false}function onWindowFocus(){windowFocused=true}function onWindowBlur(){windowFocused=false}function perPageChanged(a){a>videos.length?searchControl(ENTER):updateSearchResults(videos)}function calculatePerPage(){var a=Math.floor(($("#searchCell").height()-$("#searchForm").height())/searchItemHeight+0.3);a=Math.min(a,PERPAGE_MAX);a=Math.max(a,PERPAGE_MIN);if(perPage!=a){perPage=a;perPageChanged(a)}}
function onWindowResize(){calculatePerPage();aboutOpen&&keepInWindow($("#about"));managerOpen&&keepInWindow($("#manager"))}function onSuggestFocus(){lastFocused=$("#searchBox");itemFocused=false;$("#searchBox").focus();var a=$("#searchBox").val();$("#searchBox").setSelection(a.length,a.length)}function setSuggested(a){suggested=a;$("#suggestBox").val(suggested)}
function suggest(a){var b="http://suggestqueries.google.com/complete/search?hl=en&ds=yt&json=t&q="+encodeURIComponent(a);if(a.length>0){curRequest&&curRequest.abort();curRequest=$.ajax({type:"GET",url:b,dataType:"jsonp",success:function(c){curRequest=null;c=c[1];var d=a.ltrim();if(c&&c.length&&c[0].indexOf(d)==0){d=a.indexOf(d);newSuggested=a.substring(0,d)+c[0];if(newSuggested!=suggested){startIndex=1;searchTotal=SEARCH_MAX;setSuggested(newSuggested)}search(suggested,startIndex,perPage)}else{startIndex=
1;searchTotal=SEARCH_MAX;setSuggested("");search(a,1,perPage)}}})}else{startIndex=1;searchTotal=SEARCH_MAX;setSuggested("");search("",1,perPage)}}
function search(a,b,c){if(typeof b=="undefined")b=1;if(typeof c=="undefined")c=perPage||5;var d=a.match(/&t=(.+?)(?=&|$)/);offset=0;if(d){a=a.substring(0,d.index)+a.substring(d.index+d[0].length);offstr=d[1];if(d=offstr.match(/(\d+)m/))offset=parseInt(d[1])*60;if(d=offstr.match(/(\d+)(s|(?![m\d]))/))offset+=parseInt(d[1])}b="http://gdata.youtube.com/feeds/api/videos?q="+encodeURIComponent(a)+"&format=5&v=2&alt=jsonc&start-index="+b+"&max-results="+c;if(a.length>0){curRequest&&curRequest.abort();curRequest=
$.ajax({type:"GET",url:b,dataType:"jsonp",success:function(e){curRequest=null;if(e.data.items){videos=e.data.items;for(var f=0;f<videos.length;f++)videos[f].offset=offset}else videos=[];searchTotal=Math.min(e.data.totalItems||SEARCH_MAX,SEARCH_MAX);if(!e.data.items&&searchTotal>1&&startIndex>1){if(startIndex>searchTotal)startIndex=Math.floor(searchTotal/perPage)*perPage+1;else{startIndex-=perPage;startIndex=Math.max(1,startIndex)}search(a,startIndex,perPage)}updateSearchResults(videos)}})}else{videos=
[];updateSearchResults(videos)}}function updateSearchResults(a){var b=$("#resultsWrapper").empty();$("#searchTemplate").tmpl({results:a,count:perPage}).appendTo(b);perDisplayed=Math.min(a.length,perPage);$("#results > .searchItem").hover(onSearchItemMouseEnter,onSearchItemMouseLeave);$("#results > .searchItem").draggable({helper:createSearchDrag,appendTo:"body",connectToSortable:"#queue,#managerQueue ul",zIndex:5,start:onSearchDragStart,stop:onSearchDragStop,scroll:false})}
function createSearchDrag(){var a=$(this).attr("id");parseInt(a.substring(a.indexOf("-")+1));a=$("<div/>").addClass("searchDrag");a.append($(this).find(".searchThumb").clone());return a}function onSearchDragStart(){dragging=true;$("#queue").sortable("refresh");barMsgReset()}function onSearchDragStop(){dragging=false;barMsgReset();var a=$("#searchBox").val();oldSearch!=a&&searchControl(0)}
function onQueueDrop(a,b){var c=$(b.draggable).attr("id");id=parseInt(c.substring(c.indexOf("-")+1));isNaN(id)||queueSearchVideo(id)}function updateQueueDisplay(){$("#queueCell").empty();$("#queueTemplate").tmpl({queue:queue}).appendTo($("#queueCell"));$("#queue").sortable({update:queueSort,floats:true});$("#queue > div").hover(onQueueItemMouseEnter,onQueueItemMouseLeave);$("#queueDrop").droppable({accept:".searchItem",drop:onQueueDrop});sendQueue();updateManagerDisplay()}
function sortReceive(){}
function updateManagerDisplay(){if(queue.length>0){$("#managerFilter").show();for(var a=$("#managerFilter").val().toLowerCase(),b=$("<ul/>"),c=0;c<queue.length;c++)if(a==""||queue[c].title.toLowerCase().indexOf(a)>-1)$("#managerTemplate").tmpl({index:c,item:queue[c]}).appendTo(b);$("#managerQueue").empty().append(b);if(a==""){b.sortable("enable");b.sortable({update:queueSort,helper:"clone"})}}else{$("#managerFilter").hide();$("#managerQueue").html("You have no items in the queue")}keepInWindow($("#manager"))}
function queueSort(){var a=$(this).children();if(a.length>0){for(var b=[],c=0;c<a.length;c++){var d=$(a[c]).attr("id");id=parseInt(d.substring(d.indexOf("-")+1));if(!isNaN(id)){if(d.indexOf("search")>-1)id+="s";b.push(id)}}queueReorder(b)}}function queueReorder(a){for(var b=[],c=false,d=0;d<a.length;d++){if(typeof a[d]=="string"){var e=parseInt(a[d]);b.push(videos[e])}else b.push(queue[a[d]]);if(d==0&&a[d]!=0)c=true}queue=b;c&&setCurrentVideo(0);updateQueueDisplay()}
function watchSearchNow(a){watchVideoNow(videos[a])}function watchVideoNow(a){queue.push(a);watchNow(queue.length-1);updateQueueDisplay()}function onSearchItemMouseEnter(){$(this).find(".watchnowLink,.enqueueImg").css("display","inline-block")}function onSearchItemMouseLeave(){$(this).find(".watchnowLink,.enqueueImg").hide()}function queueSearchVideo(a){queueVideo(videos[a])}function traverse(a,b){for(i in a){console.log(i+": "+a[i]);typeof a[i]=="object"&&traverse(a[i],b)}}
function queueVideos(a){for(var b=queue.length,c=0;c<a.length;c++)queue.push(a[c]);b==0&&setCurrentVideo(0);updateQueueDisplay()}function queueVideo(a){queue.push(a);updateQueueDisplay();queue.length<=1?setCurrentVideo(0):barMsg(queue.length+". "+a.title)}
function setCurrentVideo(a){if(a<queue.length){if(a>0){var b=queue.remove(0,a);for(a=0;a<b.length;a++)previous.unshift(b[a]);updateQueueDisplay()}loadNotifyVideo(queue[0])}else{for(a=0;a<queue.length;a++)previous.unshift(queue[a]);queue=[];nextPopular();updateQueueDisplay()}}
function watchNow(a){if(a<queue.length){if(a>0){a=queue.remove(a)[0];if(queue.length>0){secs=ytplayer.getCurrentTime();if(secs>30||secs>current.duration*0.3){var b=queue.shift();previous.unshift(b)}}queue.unshift(a);updateQueueDisplay()}setCurrentVideo(0)}}function onQueueItemMouseEnter(){$(this).find(".removeLink").css("display","inline-block")}function onQueueItemMouseLeave(){$(this).find(".removeLink").hide()}
function queueRemove(a){if(a<queue.length)if(a==0)setCurrentVideo(1);else{queue.remove(a);a<=1&&barMsgReset();updateQueueDisplay()}}function loadNotifyVideo(a){if(a.accessControl&&a.accessControl.embed=="allowed"){loadNotifyVideoById(a.id,a.title,a.offset);current=a;queue.length>0&&barMsgReset()}else forceNextVideo()}
function loadNotifyVideoById(a,b,c){if(typeof c=="undefined")c=0;try{ytplayer.loadVideoById(a,c)}catch(d){setTimeout(function(){loadNotifyVideoById(a,b,c)},300);return}var e=$("#container");centerH(e,$("#videoCell"));$("#container").notify("create",{text:b},{expires:3E3,click:function(f,g){g.close()}});document.title='"'+b+'" on Youtube Karaoke'}function playVideo(){ytplayer&&ytplayer.playVideo()}function pauseVideo(){ytplayer&&ytplayer.pauseVideo()}
function stopVideo(){ytplayer&&ytplayer.stopVideo()}function clearVideo(){ytplayer&&ytplayer.clearVideo()}function playPauseVideo(){if(ytplayer)if(playerState==1)pauseVideo();else if(playerState==2||playerState==-1)playVideo()}$.browser.msie?google.setOnLoadCallback(run):$(document).ready(run);