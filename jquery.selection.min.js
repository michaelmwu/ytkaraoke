/*
jQuery plugin: fieldSelection - v0.1.0 - last change: 2006-12-16
(c) 2006 Alex Brem <alex@0xab.cd> - http://blog.0xab.cd
*/
var fieldSelection={getSelection:function(){var e=this.jquery?this[0]:this;return(('selectionStart'in e&&function(){var l=e.selectionEnd-e.selectionStart;return{start:e.selectionStart,end:e.selectionEnd,length:l,text:e.value.substr(e.selectionStart,l)};})||(document.selection&&function(){e.focus();var r=document.selection.createRange();if(r==null){return{start:0,end:e.value.length,length:0};}
var re=e.createTextRange();var rc=re.duplicate();re.moveToBookmark(r.getBookmark());rc.setEndPoint('EndToStart',re);var rcLen=rc.text.length,i,rcLenOut=rcLen;for(i=0;i<rcLen;i++){if(rc.text.charCodeAt(i)==13)rcLenOut--;}
var rLen=r.text.length,rLenOut=rLen;for(i=0;i<rLen;i++){if(r.text.charCodeAt(i)==13)rLenOut--;}
return{start:rcLenOut,end:rcLenOut+rLenOut,length:rLenOut,text:r.text};})||function(){return{start:0,end:e.value.length,length:0};})();},setSelection:function(start,end){var e=document.getElementById($(this).attr('id'));if(!e){return $(this);}else if(e.setSelectionRange){e.focus();e.setSelectionRange(start,end);}else if(e.createTextRange){var range=e.createTextRange();range.collapse(true);range.moveEnd('character',end);range.moveStart('character',start);range.select();}else if(e.selectionStart){e.selectionStart=start;e.selectionEnd=end;}
return $(this);},replaceSelection:function(){var e=this.jquery?this[0]:this;var text=arguments[0]||'';return(('selectionStart'in e&&function(){e.value=e.value.substr(0,e.selectionStart)+text+e.value.substr(e.selectionEnd,e.value.length);return this;})||(document.selection&&function(){e.focus();document.selection.createRange().text=text;return this;})||function(){e.value+=text;return this;})();}};jQuery.each(fieldSelection,function(i){jQuery.fn[i]=this;});